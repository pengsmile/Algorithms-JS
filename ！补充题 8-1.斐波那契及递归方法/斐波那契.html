<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        //尾递归
        var Fib2 = function (n, num1, num2) {
            if (n == 0) {
                return num1;
            } else {
                return Fib2(n - 1, num2, num1 + num2);
            }
        }

        //测试
        console.log(Fib2(10,1,1));

        // 优化递归版本。解决重复计算，提高性能
        function fibon(n) {
            function fib_(n, a, b) {
                if (n == 0) return a
                else return fib_(n - 1, b, a + b)
            }
            return fib_(n, 0, 1)
        }
        console.log(fibon(11))

        // 箭头函数递归 斐波那契
        let fib = n => n > 1 ? fib(n - 1) + fib(n - 2) : n;
        console.log(fib(11))

        // 普通循环 斐波那契
        function fibonacci(n) {
            let n1 = 1;
            n2 = 1;
            for (let i = 2; i <= n; i++) {
                [n1, n2] = [n2, n1 + n2]
            }
            return n2
        }

        var fibonacci = function () {
            let memo = [0, 1];
            let fib = function (n) {
                if (memo[n] == undefined) {
                    memo[n] = fib(n - 2) + fib(n - 1)
                }
                return memo[n]
            }
            return fib;
        }()


        /**
         * 记忆函数优化递归版本
         */
        function memozi(fn) {
            var r = {}
            return function (n) {
                if (r[n] == null) {
                    r[n] = fn(n)
                    return r[n]
                } else {
                    return r[n]
                }
            }
        }
        var fibfn = memozi(function (n) {
            if (n == 0) {
                return 0
            } else if (n == 1) {
                return 1
            } else {
                return fibfn(n - 1) + fibfn(n - 2)
            }
        })
        console.log(fibfn(11));
    </script>
</body>

</html>