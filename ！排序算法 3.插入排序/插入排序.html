<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        //插入排序
        //1.把数组分为“已排序”和“未排序”两部分
        //2.从“未排序”抽出第一个数，和“已排序”部分比较，插入到合适的位置
        // 时间复杂度 O(n),空间复杂度 O(1)
        function insertionSort(myArray) {
            var len = myArray.length, // 数组的长度
                value, // 当前比较的值
                i, // 未排序部分的当前位置
                j; // 已排序部分的当前位置

            //默认第一个元素是已排好序的部分，所以i从1开始是未排序的部分
            for (i = 1; i < len; ++i) {
                // 储存当前位置的值,未排序部分的第一个值
                value = myArray[i];

                /*
                 * 已排序部分从后往前一个个的和value比较
                 * 如果大于value，就往后移动一位
                 * j也在不断减少，最后就是value插入的位置
                 */
                j = i;
                while (j > 0 && myArray[j - 1] > value) {
                    myArray[j] = myArray[j - 1];
                    j--;
                }
                //j是value最终插入到有序部分的索引
                myArray[j] = value;
            }
            return myArray;
        }

        //测试一下
        var dataStore = [1, 8, 3, 2, 9, 5, 4, 7];
        console.log(insertionSort(dataStore));

        /**
         * 插入排序
         */
        function insertSort(arr) {
            let temp;
            arr.forEach((v, i) => {
                let j = i;
                while (arr[j - 1] > arr[j] && j >= 0) {
                    temp = arr[j - 1];
                    [arr[j - 1], arr[j]] = [arr[j], temp];
                    j--;
                }
            });
            return arr
        }

        var array = [];  
        for (var i = 0; i < 10000; ++i) {
            array.push(Math.round(Math.random() * 10000));  
        }
        console.log(array)
        console.time('insertSort')
        console.log(insertSort(array));
        console.timeEnd('insertSort')


        function InsertSort2 (arr) {
            let temp;
            arr.forEach((v, i) => {
                let j = i;
                while (arr[j - 1] > arr[j] && j >= 0) {
                    temp = arr[j - 1];
                    [arr[j - 1], arr[j]] = [arr[j], temp];
                    j--
                }
            })
            return arr
        }
        
        const InsertSort3 = array => {
            for (let index = 0; index < array.length; index++) {
                let j = index;
                while (array[j - 1] > array[j] && j > 0) {
                    [array[j - 1], array[j]] = [array[j], array[j - 1]]
                    j--
                }
            }
            return array
        }
        console.log(InsertSort3([3,5,1,4,2]))

        const InsertSort4 = arr => {
            for (let index = 0; index < arr.length; index++) {
                let j = index;
                while(arr[j - 1] > arr[j] && j > 0) {
                    [arr[j - 1], arr[j]] = [arr[j], arr[j - 1]]
                    j--;
                }
                
            }
            return arr
        }
        console.log(InsertSort4([3,5,1,4,2]))
    </script>
</body>

</html>